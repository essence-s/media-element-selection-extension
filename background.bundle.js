(()=>{"use strict";function e(e,t){return new Promise((function(r,n){chrome.tabs.sendMessage(parseInt(e),t,(function(e){chrome.runtime.lastError?n(chrome.runtime.lastError.message):r(e)}))}))}function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,r,n){return(r=function(e){var r=function(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}chrome.runtime.onInstalled.addListener((function(){console.log("installed")})),chrome.tabs.query({url:["https://ahiseve.vercel.app/*","http://localhost:4321/*"]},(function(t){t.forEach((function(t){e(t.id,{cmd:"CHECK_CONNECTION"}).then((function(e){"connected"==e.message&&console.log(e,"ya esta conectado")})).catch((function(e){chrome.scripting.executeScript({target:{tabId:parseInt(t.id)},files:["content.bundle.js"]}).then((function(){console.log("script injected")}))}))}))}));var c={};chrome.runtime.onMessage.addListener((function(t,r,o){return new Promise((function(e){0==Object.keys(c).length?chrome.storage.local.get(["dataG"],(function(t){t.dataG&&(c=JSON.parse(t.dataG)),e("")})):e("")})).then((function(){if("updateDataG"==t.cmd)c=t.data,chrome.storage.local.set({dataG:JSON.stringify(t.data)},(function(){console.log("Datos almacenados en el localStorage del background:")}));else if("ELEMENT_ACTION"==t.cmd)"sending"==t.data.status?chrome.tabs.query({url:["https://ahiseve.vercel.app/*","http://localhost:4321/*"]},(function(r){r.forEach((function(r){e(r.id,{cmd:t.cmd,data:t.data})}))})):e(parseInt(c.tabId),{cmd:t.cmd,data:n(n({},t.data),{},{idNumber:c.imgNumber})});else if("CHECK_ELEMENT_VIDEO_SELECTED"==t.cmd){var a={selected:!1};0!=Object.keys(c).length&&(a={selected:!0}),e(r.tab.id,{cmd:"RESULT_CHECK_ELEMENT_VIDEO_SELECTED",data:a})}o({data:"Respuesta desde el fondo"})})),!0}))})();