(()=>{"use strict";function e(e,t){return new Promise((function(n,r){chrome.tabs.sendMessage(parseInt(e),t,(function(e){chrome.runtime.lastError?r(chrome.runtime.lastError.message):n(e)}))}))}function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,n,r){return(n=function(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}chrome.runtime.onInstalled.addListener((function(){console.log("installed")})),chrome.tabs.query({url:["https://ahiseve.vercel.app/*","http://localhost:4321/*"]},(function(t){t.forEach((function(t){e(t.id,{cmd:"CHECK_CONNECTION"}).then((function(e){"connected"==e.message&&console.log(e,"ya esta conectado")})).catch((function(e){chrome.scripting.executeScript({target:{tabId:parseInt(t.id)},files:["content.bundle.js"]}).then((function(){console.log("script injected")}))}))}))}));var c={};chrome.runtime.onMessage.addListener((function(t,n,o){return new Promise((function(e){0==Object.keys(c).length?chrome.storage.local.get(["dataG"],(function(t){t.dataG&&(c=JSON.parse(t.dataG)),e("")})):e("")})).then((function(){if("updateDataG"==t.cmd)c=t.data,chrome.storage.local.set({dataG:JSON.stringify(t.data)},(function(){console.log("Datos almacenados en el localStorage del background:")}));else if("ELEMENT_ACTION"==t.cmd)"sending"==t.data.status?chrome.tabs.query({url:["https://ahiseve.vercel.app/*","http://localhost:4321/*"]},(function(n){n.forEach((function(n){e(n.id,{cmd:t.cmd,data:t.data})}))})):e(parseInt(c.tabId),{cmd:t.cmd,data:r(r({},t.data),{},{idNumber:c.imgNumber})});else if("CHECK_ELEMENT_VIDEO_SELECTED"==t.cmd){var a={selected:!1};0!=Object.keys(c).length&&(a={selected:!0}),e(n.tab.id,{cmd:"RESULT_CHECK_ELEMENT_VIDEO_SELECTED",data:a})}o({data:"no se encontro coincidencia"})})),!0}))})();